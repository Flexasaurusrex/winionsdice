<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winions Dice Roller</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Wallet Connection Screen -->
    <div class="container" id="walletScreen">
        <h1>WINIONS DICE ROLLER</h1>
        <p class="subtitle">Connect your wallet to begin</p>
        
        <div class="gate-content">
            <img src="havoc.gif" alt="Winion" class="gate-winion-gif" onerror="this.style.display='none'">
            
            <p class="gate-description">
                Connect your wallet to check your rolls and start rolling for Winions.
            </p>
            
            <div id="walletStatus" class="wallet-status" style="display: none;"></div>
            
            <button class="connect-button" id="connectButton">
                CONNECT WALLET
            </button>
            
            <div id="verificationStatus" class="verification-status"></div>
        </div>
    </div>

    <!-- Rolls Status Screen -->
    <div class="container" id="rollsScreen" style="display: none;">
        <h1>YOUR ROLLS</h1>
        <p class="subtitle">Check your available rolls</p>
        
        <div class="rolls-display">
            <div class="roll-type">
                <h3>üéÅ FREE ROLLS</h3>
                <div class="roll-count" id="freeRollsCount">0</div>
                <p>Whitelist rolls</p>
            </div>
            
            <div class="roll-type">
                <h3>üíé PURCHASED ROLLS</h3>
                <div class="roll-count" id="paidRollsCount">0</div>
                <p>Owned rolls</p>
            </div>
        </div>
        
        <div class="purchase-section">
            <h3>PURCHASE MORE ROLLS</h3>
            <div class="purchase-options">
                <button class="purchase-button" onclick="purchaseRolls(1)">
                    <span class="package">1 ROLL</span>
                    <span class="price" id="price1">0.0111 ETH</span>
                </button>
                <button class="purchase-button popular" onclick="purchaseRolls(3)">
                    <span class="badge">POPULAR</span>
                    <span class="package">3 ROLLS</span>
                    <span class="price" id="price3">0.03 ETH</span>
                    <span class="savings">SAVE 10%</span>
                </button>
                <button class="purchase-button" onclick="purchaseRolls(5)">
                    <span class="package">5 ROLLS</span>
                    <span class="price" id="price5">0.045 ETH</span>
                    <span class="savings">SAVE 19%</span>
                </button>
            </div>
        </div>
        
        <button class="action-button" id="continueToSchool">
            CONTINUE TO ROLL ‚Üí
        </button>
    </div>

    <!-- School Selection Screen -->
    <div class="container" id="schoolScreen" style="display: none;">
        <h1>ROLL TO MINT NEW WINION</h1>
        <p class="subtitle">Roll one of the D66 dice below</p>
        
        <p class="description">
            the winions value three different schools of mayhem which determine the life schemes of each winion. almost like choosing a religion. decide for this winion you are summoning to which school they will belong. choose wisely.
        </p>

        <div class="dice-row">
            <img src="ORANGEDIE.png" alt="Anarchy Dice" class="dice-image">
            <img src="BLUEDIE.png" alt="Mischief Dice" class="dice-image">
            <img src="GREENDIE.png" alt="Luck Dice" class="dice-image">
        </div>

        <div class="button-row">
            <button class="school-button" data-school="anarchy">
                <img src="ANARCHY.png" alt="Anarchy Icon" class="button-icon">
                <span>ANARCHY</span>
            </button>
            <button class="school-button" data-school="mischief">
                <img src="MISCHIEF.png" alt="Mischief Icon" class="button-icon">
                <span>MISCHIEF</span>
            </button>
            <button class="school-button" data-school="luck">
                <img src="LUCK.png" alt="Luck Icon" class="button-icon">
                <span>LUCK</span>
            </button>
        </div>
    </div>

    <!-- Dice Rolling Screen -->
    <div class="container" id="diceScreen" style="display: none;">
        <h1>ROLL FOR YOUR HOUSE</h1>
        <p class="subtitle school-chosen">School of <span id="chosenSchool"></span></p>

        <div class="dice-display" id="diceDisplay"></div>

        <div class="controls">
            <button class="roll-button" id="rollButton">üé≤ ROLL THE DICE üé≤</button>
        </div>

        <div class="dice-total">
            <span class="total-label">YOUR TOTAL</span>
            <span class="total-value" id="totalValue">0</span>
            <span class="total-range">Range: 66-396</span>
        </div>
        
        <div id="houseResult" class="house-result-display" style="display: none;">
            <h3>YOU ROLLED INTO:</h3>
            <div class="house-name-large" id="rolledHouseName"></div>
            <button class="claim-button" id="claimButton">CLAIM YOUR WINION</button>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal" id="successModal" style="display: none;">
        <div class="modal-content">
            <h2>üéâ WINION CLAIMED! üéâ</h2>
            <img id="claimedNFTImage" src="" alt="Your Winion" class="claimed-nft-image">
            <h3 id="claimedHouseName"></h3>
            <p class="claimed-details">
                Token ID: <strong id="claimedTokenId"></strong><br>
                Roll Total: <strong id="claimedRollTotal"></strong>
            </p>
            <a id="etherscanLink" href="" target="_blank" class="etherscan-link">View on Etherscan ‚Üí</a>
            <button class="close-button" onclick="resetToRollsScreen()">ROLL AGAIN</button>
        </div>
    </div>

    <!-- Ethers.js Library v5 (jsdelivr CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    
    <!-- Configuration & Contract -->
    <script src="config.js"></script>
    <script src="contract-abi.js"></script>
    
    <!-- Main App Script -->
    <script src="script.js"></script>
</body>
</html>
